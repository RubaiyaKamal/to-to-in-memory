{{- /*
Kubernetes Service for Todo Chatbot Frontend
Task 3.2: Helm Templates
Reference: specs/003-local-k8s-deployment/tasks.md

This template creates a NodePort service for external access to the Next.js frontend.
Service DNS: todo-chatbot-frontend.todo-chatbot.svc.cluster.local
Access URL: http://<minikube-ip>:<nodePort>
*/ -}}
{{- if .Values.frontend.enabled }}
apiVersion: v1
kind: Service
metadata:
  name: todo-chatbot-frontend
  namespace: {{ .Values.namespace.name }}
  labels:
    {{- include "todo-chatbot.labels" . | nindent 4 }}
    component: frontend
  annotations:
    description: "NodePort service for external access to frontend"
spec:
  # NodePort: External access to frontend (for development/testing)
  type: {{ .Values.frontend.service.type }}

  # Selector must match frontend deployment pod labels
  selector:
    app: todo-chatbot-frontend

  # Port configuration
  ports:
  - name: http
    port: {{ .Values.frontend.service.port }}
    targetPort: {{ .Values.frontend.service.targetPort }}
    {{- if and (eq .Values.frontend.service.type "NodePort") .Values.frontend.service.nodePort }}
    nodePort: {{ .Values.frontend.service.nodePort }}
    {{- end }}
    protocol: TCP

  # Session affinity: None for stateless frontend
  sessionAffinity: None
{{- end }}
