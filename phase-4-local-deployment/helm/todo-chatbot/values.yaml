# Default values for todo-chatbot Helm chart

# Global settings
global:
  environment: local

# Namespace configuration
namespace:
  create: true
  name: todo-chatbot

# Backend configuration
backend:
  enabled: true
  replicaCount: 2

  image:
    repository: todo-chatbot-backend
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 8001
    targetPort: 8001

  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  env:
    DATABASE_URL: "sqlite:///./database_v2.db"

  secret:
    # IMPORTANT: Replace with your actual OpenAI API key
    OPENAI_API_KEY: "sk-proj-your-openai-api-key-here"

  livenessProbe:
    enabled: true
    path: /api/health
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

  readinessProbe:
    enabled: true
    path: /api/health
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

  persistence:
    enabled: true
    storageClass: "standard"
    accessMode: ReadWriteOnce
    size: 1Gi
    mountPath: /app/data

# Frontend configuration
frontend:
  enabled: true
  replicaCount: 2

  image:
    repository: todo-chatbot-frontend
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: NodePort
    port: 80
    targetPort: 80
    nodePort: 30080

  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

  env:
    VITE_API_URL: "http://todo-chatbot-backend:8001"

  livenessProbe:
    enabled: true
    path: /health
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

  readinessProbe:
    enabled: true
    path: /health
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 2
    failureThreshold: 3

# Autoscaling (optional, disabled by default)
autoscaling:
  backend:
    enabled: false
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80

  frontend:
    enabled: false
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80

# Ingress configuration (optional)
ingress:
  enabled: false
  className: "nginx"
  annotations: {}
  hosts:
    - host: todo-chatbot.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# Additional labels to apply to all resources
labels:
  app: todo-chatbot
  managed-by: helm
