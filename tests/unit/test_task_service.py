import pytest\nfrom unittest.mock import Mock\nfrom todo.models.task import Task\nfrom todo.services.task_service import TaskService\nfrom todo.storage.task_repository import TaskRepository\n\nclass TestTaskService:\n    @pytest.fixture\n    def mock_repo(self):\n        return Mock(spec=TaskRepository)\n\n    @pytest.fixture\n    def task_service(self, mock_repo):\n        return TaskService(mock_repo)\n\n    def test_add_task_title_only(self, task_service, mock_repo):\n        title = "Buy groceries"\n        task = task_service.add_task(title)\n\n        assert isinstance(task, Task)\n        assert task.title == title\n        assert task.description is None\n        assert task.status == "incomplete"\n        assert len(task.id) > 0 # Ensure ID is generated\n        mock_repo.add.assert_called_once_with(task)\n\n    def test_add_task_with_description(self, task_service, mock_repo):\n        title = "Read a book"\n        description = "Start Dune"\n        task = task_service.add_task(title, description)\n\n        assert isinstance(task, Task)\n        assert task.title == title\n        assert task.description == description\n        assert task.status == "incomplete"\n        assert len(task.id) > 0\n        mock_repo.add.assert_called_once_with(task)\n\n    def test_add_task_empty_title_raises_error(self, task_service, mock_repo):\n        with pytest.raises(ValueError, match="Task title cannot be empty"):\n            task_service.add_task("")\n        mock_repo.add.assert_not_called()\n
    def test_get_all_tasks_empty_list(self, task_service, mock_repo):\n        mock_repo.get_all.return_value = []\n        tasks = task_service.get_all_tasks()\n        assert tasks == []\n        mock_repo.get_all.assert_called_once()\n\n    def test_get_all_tasks_multiple_tasks(self, task_service, mock_repo):\n        task1 = Task(id="1", title="Task 1")\n        task2 = Task(id="2", title="Task 2", description="Description for Task 2")\n        mock_repo.get_all.return_value = [task1, task2]\n\n        tasks = task_service.get_all_tasks()\n        assert len(tasks) == 2\n        assert tasks[0].title == "Task 1"\n        assert tasks[1].description == "Description for Task 2"\n        mock_repo.get_all.assert_called_once()\n
